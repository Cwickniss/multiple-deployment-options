---
name: "Multiple Deployment Options"
description: "Deploy a Fibonacci microservice to differnet compute options to compare them."
required:
  - repo
  - deploy

# Github repos
repo:
  service_id: githubpublic
  parameters:
    repo_name: 'multiple-deployment-options'
    repo_url: 'https://github.com/IBM-Bluemix/multiple-deployment-options'
    type: fork
    has_issues: false

# Pipelines
build:
  service_id: pipeline
  parameters:
    name: '{{repo.parameters.repo_name}}'
    ui-pipeline: true
    configuration:
      content: $file(pipeline.yml)
      env:
        REPO: "repo"
        CF_APP_NAME: '{{deploy.parameters.deploy-app-name}}'
        SPACE_NAME: '{{deploy.parameters.deploy-space}}'
        ORG_NAME: '{{deploy.parameters.deploy-organization}}'
        REGION_ID: '{{deploy.parameters.deploy-region}}'
        execute: true
    services: ["repo"]
  hidden: [form, description]

#Deployment
deploy:
  schema:
    $ref: deploy.json
  service-category: pipeline
  parameters:
    deploy-app-name: "fibonacci-service-{{timestamp}}"
